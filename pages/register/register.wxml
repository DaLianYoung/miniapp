<view class="page">
    <view wx:if="{{!hasUserInfoAuth && showAskUserInfoBtn}}" class="authAskBtnWrap">
        <text>欢迎使用汇报价小程序，请先授权登录。</text>
        <button open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo" type="primary" hover-class="my-button-hover">
            授权登录
        </button>
    </view>
    <view class="userinfo" wx:if="{{hasUserInfoAuth}}">
        <image bindtap="bindViewTap" class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
        <text class="userinfo-nickname">{{userInfo.nickName}}</text>
    </view>
    <view class="page__bd" wx:if="{{hasUserInfoAuth && !hasBindPhone}}">
        <view class="weui-cells__title">绑定手机</view>
        <view class="weui-cells weui-cells_after-title">
            <view class="weui-cell weui-cell_input weui-cell_vcode">
                <view class="weui-cell__hd">
                    <view class="weui-label">手机号</view>
                </view>
                <view class="weui-cell__bd">
                    <input class="weui-input" bindinput="inputgetName" data-name='registeInfo.mobile'
                           value="{{registeInfo.mobile}}" placeholder="请输入手机号"/>
                </view>
                <view class="weui-cell__ft">
                    <view class="weui-vcode-btn {{isDisableVerfiyBtn ? 'disabledBtn' : ''}}" bindtap="requestVerifyCode">{{verifyLabel}}</view>
                </view>
            </view>
            <view class="weui-cell weui-cell_input">
                <view class="weui-cell__hd">
                    <view class="weui-label">验证码</view>
                </view>
                <view class="weui-cell__bd">
                    <input class="weui-input" bindinput="inputgetName" data-name='registeInfo.mobileCode'
                           value="{{registeInfo.mobileCode}}" placeholder="请输入验证码"/>
                </view>
            </view>
            <view>
                <button hover-class="my-button-hover" class="weui-btn no-radius" formType="submit" type="primary"
                        bindtap="bindPhoneNum">绑定
                </button>
            </view>
        </view>
    </view>
    <view class="page__bd" wx:if="{{hasUserInfoAuth && hasBindPhone}}">
        <view class="weui-cells__title">注册信息</view>
        <view class="weui-cells weui-cells_after-title">
            <view class="weui-cell weui-cell_input">
                <view class="weui-cell__hd">
                    <view class="weui-label">姓名</view>
                </view>
                <view class="weui-cell__bd">
                    <input class="weui-input" bindinput="inputgetName" data-name='registeInfo.name'
                           value="{{registeInfo.name}}" placeholder="您的姓名"/>
                </view>
            </view>
            <view class="weui-cell weui-cell_select">
                <view class="weui-cell__hd weui-cell__hd_in-select-after">
                    <view class="weui-label">地址</view>
                </view>
                <view class="weui-cell__bd">
                    <view class="picker weui-select weui-select_in-select-after" bindtap="openLocation">{{regionLabel ? regionLabel : '请填写地址'}}</view>
                </view>
            </view>
            <view class="weui-cell weui-cell_input" wx:if="{{registeInfo.role}}">
                <view class="weui-cell__hd">
                    <view class="weui-label">角色</view>
                </view>
                <view class="weui-cell__bd">
                    <text class="weui-input">{{registeInfo.role}}</text>
                </view>
            </view>
            <view class="weui-cell weui-cell_select" wx:if="{{!registeInfo.role}}">
                <view class="weui-cell__hd weui-cell__hd_in-select-after">
                    <view class="weui-label">角色</view>
                </view>
                <view class="weui-cell__bd">
                    <van-radio-group value="{{ registeInfo.role }}" custom-class="weui-input vertical"
                                     bind:change="onChange">
                        <van-radio custom-class="fl mr5" name="1">游客</van-radio>
                        <van-radio custom-class="fl mr5" name="2">查勘员</van-radio>
                        <van-radio custom-class="fl mr5" name="3">服务者</van-radio>
                    </van-radio-group>
                </view>
            </view>
            <view class="weui-cell weui-cell_input weui-cell_vcode" wx:if="{{isModifyPhone}}">
                <view class="weui-cell__hd">
                    <view class="weui-label">手机号</view>
                </view>
                <view class="weui-cell__bd">
                    <input class="weui-input" bindinput="inputgetName" data-name='registeInfo.mobile'
                           value="{{registeInfo.mobile}}" placeholder="请输入手机号"/>
                </view>
                <view class="weui-cell__ft">
                    <view class="weui-vcode-btn {{isDisableVerfiyBtn ? 'disabledBtn' : ''}}" bindtap="requestVerifyCode">{{verifyLabel}}</view>
                </view>
            </view>
            <view class="weui-cell weui-cell_input" wx:if="{{isModifyPhone}}">
                <view class="weui-cell__hd">
                    <view class="weui-label">验证码</view>
                </view>
                <view class="weui-cell__bd">
                    <input class="weui-input" bindinput="inputgetName" data-name='registeInfo.mobileCode'
                           value="{{registeInfo.mobileCode}}" placeholder="请输入验证码"/>
                </view>
            </view>
            <view class="weui-cell weui-cell_select">
                <view class="weui-cell__hd weui-cell__hd_in-select-after">
                    <view class="weui-label">单位类别</view>
                </view>
                <view class="weui-cell__bd">
                    <picker bindchange="companyTypeChange" value="{{registeInfo.companyType}}"
                            range="{{companyCategoryList}}">
                        <view class="picker weui-select weui-select_in-select-after">
                            {{companyCategoryList[companyCategory] ? companyCategoryList[companyCategory] : '请选择单位类别'}}
                        </view>
                    </picker>
                </view>
            </view>
            <view class="weui-cell weui-cell_select">
                <view class="weui-cell__hd weui-cell__hd_in-select-after">
                    <view class="weui-label">单位名称</view>
                </view>
                <view class="weui-cell__bd">
                    <picker bindchange="companyNameChange" value="{{registeInfo.companyName}}"
                            range="{{companyNameList}}">
                        <view class="picker weui-select weui-select_in-select-after">
                            {{companyNameList[companyName] ? companyNameList[companyName] : '请选择单位名称'}}
                        </view>
                    </picker>
                </view>
            </view>
            <view class="weui-cell weui-cell_input" wx:if="{{!isOurUser}}">
                <view class="weui-cell__hd">
                    <view class="weui-label">邀请码</view>
                </view>
                <view class="weui-cell__bd">
                    <input class="weui-input" bindinput="inputgetName" data-name='registeInfo.inviteCode'
                           value="{{registeInfo.inviteCode}}" placeholder="请输入邀请码"/>
                </view>
            </view>
            <view class="weui-cell weui-cell_input" wx:if="{{isOurUser}}">
                <view class="weui-cell__hd">
                    <view class="weui-label">我的邀请码</view>
                </view>
                <view class="weui-cell__bd">
                    <text class="weui-input">{{registeInfo.inviteCode}}</text>
                </view>
            </view>
            <view>
                <button hover-class="my-button-hover" class="weui-btn no-radius" formType="submit" type="primary"
                        bindtap="submitRegiste">确定
                </button>
            </view>
        </view>
    </view>
    <van-popup
            show="{{ show }}"
            position="bottom"
            overlay="{{ true }}"
    >
        <van-area area-list="{{ areaList }}" value="{{ region }}" bind:confirm="onConfirm" bind:cancel="onCancel"/>
    </van-popup>
</view>